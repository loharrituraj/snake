<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Snake Game</title>
  <style>
    body{margin:0; background:#111; color:#fff; font-family:Arial, sans-serif; display:flex; align-items:center; justify-content:center; height:100vh; flex-direction:column}
    #game{background:#000; box-shadow:0 0 20px rgba(0,0,0,.6)}
    .info{margin-top:10px; opacity:.9}
  </style>
</head>
<body>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1846279779833251"
     crossorigin="anonymous"></script>
  <canvas id="game" width="400" height="400"></canvas>
  <div class="info">Score: <span id="score">0</span> &nbsp;|&nbsp; Controls: ? ? ? ? &nbsp;|&nbsp; Restart: Enter</div>

  <script>
  (function(){
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');

    const tile = 20;                  // grid size (20px)
    const tiles = canvas.width / tile; // 20x20 grid

    let snake, dir, food, score, speed, loop, pendingDir, gameOver;

    function reset(){
      snake = [{x:10, y:10}];          // start center
      dir = {x:1, y:0};
      pendingDir = dir;
      score = 0;
      speed = 120;                     // ms per tick
      gameOver = false;
      placeFood();
      scoreEl.textContent = score;
      clearInterval(loop);
      loop = setInterval(tick, speed);
    }

    function placeFood(){
      food = {
        x: Math.floor(Math.random()*tiles),
        y: Math.floor(Math.random()*tiles)
      };
      // avoid placing on snake
      if(snake.some(s=>s.x===food.x && s.y===food.y)) placeFood();
    }

    function tick(){
      // update direction (prevents reversing bug)
      dir = pendingDir;

      // new head
      const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};

      // wall collision
      if(head.x < 0 || head.x >= tiles || head.y < 0 || head.y >= tiles){
        return endGame();
      }

      // self collision
      if(snake.some(s => s.x===head.x && s.y===head.y)){
        return endGame();
      }

      snake.unshift(head);

      // eat food
      if(head.x === food.x && head.y === food.y){
        score++;
        scoreEl.textContent = score;
        placeFood();
        // speed up a bit
        if(speed > 60){
          speed -= 3;
          clearInterval(loop);
          loop = setInterval(tick, speed);
        }
      } else {
        snake.pop(); // move forward
      }

      draw();
    }

    function draw(){
      // background
      ctx.fillStyle = '#111';
      ctx.fillRect(0,0,canvas.width,canvas.height);

      // draw food
      ctx.fillStyle = '#e74c3c';
      ctx.fillRect(food.x*tile, food.y*tile, tile, tile);

      // draw snake
      for(let i=0;i<snake.length;i++){
        ctx.fillStyle = i===0 ? '#2ecc71' : '#27ae60';
        ctx.fillRect(snake[i].x*tile, snake[i].y*tile, tile-1, tile-1);
      }
    }

    function endGame(){
      clearInterval(loop);
      gameOver = true;
      // dark overlay
      ctx.fillStyle = 'rgba(0,0,0,0.6)';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#fff';
      ctx.font = '24px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('Game Over', canvas.width/2, canvas.height/2 - 10);
      ctx.font = '16px Arial';
      ctx.fillText('Score: '+score+'  |  Press Enter to Restart', canvas.width/2, canvas.height/2 + 20);
    }

    // controls
    window.addEventListener('keydown', e=>{
      if(gameOver && e.key === 'Enter'){ reset(); return; }
      if(e.key === 'ArrowUp'    && dir.y !== 1)  pendingDir = {x:0,y:-1};
      if(e.key === 'ArrowDown'  && dir.y !== -1) pendingDir = {x:0,y:1};
      if(e.key === 'ArrowLeft'  && dir.x !== 1)  pendingDir = {x:-1,y:0};
      if(e.key === 'ArrowRight' && dir.x !== -1) pendingDir = {x:1,y:0};
    });

    reset();
    draw();
  })();
  </script>
</body>

</html>
